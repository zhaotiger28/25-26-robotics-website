<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Team - Hornet Robotics</title>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <nav class="navbar">
    <div class="nav-left">
      <span class="menu-icon" id="menuToggle">&#9776; MENU</span>
      <h1>Hornet Robotics</h1>
    </div>
    <div class="nav-right" id="navLinks">
      <a href="index.html">Home</a>
      <a href="#teamSection">Team</a>
      <a href="community.html">Community</a>
      <a href="contact.html">Contact</a>
    </div>
  </nav>

  <section id="teamSection" class="section">
    <h2>Our Team</h2>
    <div class="team-grid">
      <!--5x5 grid-->
      <!-- Row 1 -->
      <div class="team-member">
        <div class="member-photo" data-img></div>
        <h4><span class="name">Aarav Nesargi</span> <span class="grade">10th</span></h4>
        <p>Role</p>
      </div>
      <div class="team-member">
        <div class="member-photo" data-img></div>
        <h4><span class="name">Ahan Jain</span> <span class="grade">11th</span></h4>
        <p>Role</p>
      </div>
      <div class="team-member">
        <div class="member-photo" data-img></div>
        <h4><span class="name">Ayan Jain</span> <span class="grade">11th</span></h4>
        <p>Role</p>
      </div>
      <div class="team-member">
        <div class="member-photo" data-img></div>
        <h4><span class="name">Chloe Tandon</span> <span class="grade">10th</span></h4>
        <p>Role</p>
      </div>
      <div class="team-member">
        <div class="member-photo" data-img></div>
        <h4><span class="name">Ellen Mapes</span> <span class="grade">9th</span></h4>
        <p>Role</p>
      </div>

      <!-- Row 2 -->
      <div class="team-member">
        <div class="member-photo" data-img></div>
        <h4><span class="name">Gabriel De La Torre</span> <span class="grade">11th</span></h4>
        <p>Role</p>
      </div>
      <div class="team-member">
        <div class="member-photo" data-img></div>
        <h4><span class="name">Harshdeep Bommareddy</span> <span class="grade">12th</span></h4>
        <p>Role</p>
      </div>
      <div class="team-member">
        <div class="member-photo" data-img></div>
        <h4><span class="name">Johnny Sewak</span> <span class="grade">11th</span></h4>
        <p>Role</p>
      </div>
      <div class="team-member">
        <div class="member-photo" data-img></div>
        <h4><span class="name">Justin Wu</span> <span class="grade">12th</span></h4>
        <p>Role</p>
      </div>
      <div class="team-member">
        <div class="member-photo" data-img></div>
        <h4><span class="name">Kiran Karthik</span> <span class="grade">11th</span></h4>
        <p>Role</p>
      </div>

      <!-- Row 3 -->
      <div class="team-member">
        <div class="member-photo" data-img></div>
        <h4><span class="name">Knox Smith</span> <span class="grade">10th</span></h4>
        <p>Role</p>
      </div>
      <div class="team-member">
        <div class="member-photo" data-img></div>
        <h4><span class="name">Niam Ghelani</span> <span class="grade">11th</span></h4>
        <p>Role</p>
      </div>
      <div class="team-member">
        <div class="member-photo" data-img></div>
        <h4><span class="name">Raj Reddy</span> <span class="grade">11th</span></h4>
        <p>Role</p>
      </div>
      <div class="team-member">
        <div class="member-photo" data-img></div>
        <h4><span class="name">Sahith Chintapalli</span> <span class="grade">11th</span></h4>
        <p>Role</p>
      </div>
      <div class="team-member">
        <div class="member-photo" data-img></div>
        <h4><span class="name">Samaira Panjiar</span> <span class="grade">10th</span></h4>
        <p>Role</p>
      </div>

      <!-- Row 4 -->
      <div class="team-member">
        <div class="member-photo" data-img></div>
        <h4><span class="name">Sammie Engberg</span> <span class="grade">10th</span></h4>
        <p>Role</p>
      </div>
      <div class="team-member">
        <div class="member-photo" data-img></div>
        <h4><span class="name">Samy Santosh</span> <span class="grade">10th</span></h4>
        <p>Role</p>
      </div>
      <div class="team-member">
        <div class="member-photo" data-img></div>
        <h4><span class="name">Sanay Nesargi</span> <span class="grade">12th</span></h4>
        <p>Role</p>
      </div>
      <div class="team-member">
        <div class="member-photo" data-img></div>
        <h4><span class="name">Sydney Terrell</span> <span class="grade">12th</span></h4>
        <p>Role</p>
      </div>
      <div class="team-member">
        <div class="member-photo" data-img></div>
        <h4><span class="name">Tej Sachdeva</span> <span class="grade">11th</span></h4>
        <p>Role</p>
      </div>

      <!-- Row 5 -->
      <div class="team-member">
        <div class="member-photo" data-img></div>
        <h4><span class="name">Tiger Zhao</span> <span class="grade">10th</span></h4>
        <p>Role</p>
      </div>
      <div class="team-member">
        <div class="member-photo" data-img></div>
        <h4><span class="name">Vedant Subramanian</span> <span class="grade">12th</span></h4>
        <p>Role</p>
      </div>
      <div class="team-member">
        <div class="member-photo" data-img></div>
        <h4><span class="name">Vihaan Magan</span> <span class="grade">9th</span></h4>
        <p>Role</p>
      </div>
      <div class="team-member">
        <div class="member-photo" data-img>Photo</div>
        <h4>Member 24</h4>
        <p>Role</p>
      </div>
      <div class="team-member">
        <div class="member-photo" data-img>Photo</div>
        <h4>Member 25</h4>
        <p>Role</p>
      </div>
    </div>
  </section>

  <footer>
    <p>&copy; 2025 Hornet Robotics - Team 9045</p>
  </footer>

  <script>
    const menuToggle = document.getElementById('menuToggle');
    const navLinks = document.getElementById('navLinks');
    menuToggle.addEventListener('click', () => {
      navLinks.classList.toggle('active');
    });
  </script>

  <!--auto put pictures in the thingy-->>
  <script>
    (function() {
      // Config
      const folder = 'images/teamheadshots/';
      const exts = ['.jpg', '.jpeg', '.png'];

      // clean the naems
      function variants(name) {
        const clean = name.trim();
        const v = new Set();
        v.add(clean);
        v.add(clean.replace(/\s+/g, '_'));
        v.add(clean.replace(/\s+/g, '-'));
        v.add(clean.replace(/\s+/g, '').toLowerCase());
        v.add(clean.toLowerCase().replace(/\s+/g, '_'));
        v.add(clean.toLowerCase().replace(/\s+/g, '-'));
        return Array.from(v);
      }

      // try to load and dont if fail
      function tryLoad(src) {
        return new Promise((resolve, reject) => {
          const img = new Image();
          img.onload = () => resolve(src);
          img.onerror = () => reject(src);
          img.src = src;
        });
      }

      // find the h4 and set the image
      document.addEventListener('DOMContentLoaded', () => {
        const members = document.querySelectorAll('.team-member');
        members.forEach(member => {
          const nameEl = member.querySelector('h4');
          const photoEl = member.querySelector('.member-photo');
          if (!nameEl || !photoEl) return;
          // prefer a .name span if the h4 was written by the updater script
          const nameSpan = nameEl.querySelector('.name');
          const name = (nameSpan && (nameSpan.textContent || nameSpan.innerText)) || nameEl.textContent || nameEl.innerText || '';
          const nameVars = variants(name);

          // use diff endigns
          const candidates = [];
          nameVars.forEach(v => exts.forEach(ext => candidates.push(folder + v + ext)));

          // loop through each one
          (async function tryCandidates() {
            for (const url of candidates) {
              try {
                await tryLoad(url);
                // set the background and kick
                photoEl.style.backgroundImage = `url('${url}')`;
                // debug
                photoEl.setAttribute('data-img', url);
                return;
              } catch (e) {
                // failed
              }
            }
            // no image -> placeholder
          })();
        });
      });
    })();
  </script>
  <!-- Team member bio modal -->
  <div id="bioModal" class="modal-overlay" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
      <button class="close-btn" aria-label="Close">Ã—</button>
      <div class="modal-photo" id="modalPhoto"></div>
      <div class="modal-body">
        <h3 id="modalTitle"></h3>
        <div id="modalGrade" style="color:#666; margin-bottom:8px;"></div>
        <p id="modalRole" style="font-weight:600; margin-bottom:12px;">Role</p>
        <div id="modalBio">No bio available.</div>
      </div>
    </div>
  </div>

  <script>
    (function(){
      const modal = document.getElementById('bioModal');
      const modalPhoto = document.getElementById('modalPhoto');
      const modalTitle = document.getElementById('modalTitle');
      const modalGrade = document.getElementById('modalGrade');
      const modalRole = document.getElementById('modalRole');
      const modalBio = document.getElementById('modalBio');
      const closeBtn = modal.querySelector('.close-btn');

      function openModal(data){
        modalPhoto.style.backgroundImage = data.photo ? `url('${data.photo}')` : '';
        modalTitle.textContent = data.name || '';
        modalGrade.textContent = data.grade || '';
        modalRole.textContent = data.role || '';
        modalBio.textContent = data.bio || 'No bio available.';
        modal.classList.add('show');
        modal.setAttribute('aria-hidden','false');
        // trap focus on close for accessibility
        closeBtn.focus();
      }

      function closeModal(){
        const dialog = modal.querySelector('.modal');
        if (!dialog) {
          modal.classList.remove('show');
          modal.setAttribute('aria-hidden','true');
          return;
        }
        // play closing animation
        dialog.classList.add('closing');
        dialog.addEventListener('animationend', function _onend(){
          dialog.classList.remove('closing');
          modal.classList.remove('show');
          modal.setAttribute('aria-hidden','true');
          dialog.removeEventListener('animationend', _onend);
        });
      }

      // Click a team-member to open
      document.querySelectorAll('.team-member').forEach(member => {
        member.addEventListener('click', async () => {
          const nameEl = member.querySelector('h4');
          const nameSpan = nameEl ? nameEl.querySelector('.name') : null;
          const name = (nameSpan && nameSpan.textContent) || (nameEl && (nameEl.textContent || nameEl.innerText)) || '';
          const gradeEl = nameEl ? nameEl.querySelector('.grade') : null;
          const grade = gradeEl ? gradeEl.textContent : '';
          const role = (member.querySelector('p') || {}).textContent || '';
          // photo priority: data-img attr, then background-image style
          const photoEl = member.querySelector('.member-photo');
          const photo = photoEl && (photoEl.getAttribute('data-img') || (photoEl.style.backgroundImage || '').replace(/^url\(['\"]?|['\"]?\)$/g, ''));

          // bio: use cached data-bio if present, otherwise try fetching a bio file on demand
          let bio = member.dataset.bio || member.getAttribute('data-bio') || '';
          if (!bio) {
            // show loading state in modal while we fetch
            openModal({name, grade, role, photo, bio: 'Loading bio...'});

            // build filename variants
            const clean = name.trim();
            const variants = Array.from(new Set([
              clean,
              clean.replace(/\s+/g, '_'),
              clean.replace(/\s+/g, '-'),
              clean.replace(/\s+/g, ''),
              clean.toLowerCase(),
              clean.toLowerCase().replace(/\s+/g, '_'),
              clean.toLowerCase().replace(/\s+/g, '-')
            ])).filter(Boolean);

            const roots = ['bios/', 'tools/bios/', 'tools/'];
            const suffixes = ['', '-bio', '_bio', 'bio'];

            let found = null;
            for (const root of roots) {
              for (const v of variants) {
                for (const suf of suffixes) {
                  const url = `${root}${v}${suf}.txt`;
                  try {
                    const res = await fetch(url, {cache: 'no-cache'});
                    if (res.ok) {
                      const text = (await res.text()).trim();
                      if (text) { found = text.replace(/\s+/g, ' '); break; }
                    }
                  } catch (e) {
                    // ignore network errors and try next
                  }
                }
                if (found) break;
              }
              if (found) break;
            }

            if (found) {
              bio = found;
              // cache on element for future clicks
              try { member.setAttribute('data-bio', bio); } catch (e) {}
              // update modal content with the found bio
              const modalBioEl = document.getElementById('modalBio');
              if (modalBioEl) modalBioEl.textContent = bio;
            } else {
              bio = '';
              const modalBioEl = document.getElementById('modalBio');
              if (modalBioEl) modalBioEl.textContent = 'No bio available.';
            }
          } else {
            openModal({name, grade, role, photo, bio});
          }
        });
      });

      // close handlers
      closeBtn.addEventListener('click', closeModal);
      modal.addEventListener('click', (e) => {
        if (e.target === modal) closeModal();
      });
      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') closeModal();
      });
    })();
  </script>
</body>
</html>
